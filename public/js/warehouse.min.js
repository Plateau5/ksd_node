function getAuditData(){var data={};data.id=$.trim($("#applyOrder").val());data.gps_ids=$.trim($("#sendSn").val());data.delGps_ids=$.trim($("#delSnStr").val());try{if(RECEIVETYPE===1){var receiptor=$.trim($("#receiptor").val());if(receiptor==""){$alert("领取人姓名不能为空");return false}else{var remark=$.trim($("#remark").val());data.receiver=receiptor;data.remark=remark;return data}}else if(RECEIVETYPE===2){var expressCompany=$.trim($("#expressCompany option:selected").val());var courierNumber=$.trim($("#courierNumber").val());var remark=$.trim($("#remark").val());if(expressCompany==""){$alert("请先选择快递公司");return false}else if(courierNumber==""){$alert("请填写快递单号");return false}else{data.express_id=expressCompany;data.express_code=courierNumber;data.remark=remark;return data}}else if(RECEIVETYPE===3){var reason=$.trim($("#reason").val());data.reason=reason;return data}}catch(e){console.log(e.description)}}function bindSubmitEvent(){var btn=$("#submitBtn");btn.off("click").on("click",function(){submitEvent(btn)})}function submitEvent(b){var msg="";if(RECEIVETYPE===1||RECEIVETYPE===2){msg="发送成功"}else if(RECEIVETYPE===3){msg="操作成功"}var data=getAuditData();if(data){b.off("click");var url=contextPath+"/api/gps/apply/confirm";$.ajax({type:"post",timeout:5e4,url:url,data:data,beforeSend:function(){$("#loading").show()},success:function(res){$("#loading").hide();if(res.error_code==0){$alert(msg,function(){locationTo({action:contextPath+markUri+"/gps/apply/list",param:reqParamsStr})})}else{bindSubmitEvent();$alert(res.error_msg)}},error:function(){$("#loading").hide();bindSubmitEvent();$alert("网络异常，请稍后重试")}})}else{return}}function checkRepeat(newStr,oldValue,tips){if($.inArray(newStr,oldValue)!=-1){$alert(tips);return true}else{return false}}function fuzzyQuery(res){var queryStr=$.trim($("#user").val()),queryArr=queryStr.split(""),data=res,resArr;if(queryStr){for(var i=0,len=queryArr.length;i<len;i++){resArr=[];for(var k=0;k<data.length;k++){if(data[k].name.indexOf(queryArr[i])!=-1){resArr.push(data[k])}}data=resArr}return resArr}}function showSearchResult(res){var html=[];if(res==undefined||res.length==0||res.length==undefined){return $(".user_list").html('<li class="res_item" style="text-align: center;">暂无数据</li>')}else{for(var i=0,len=res.length;i<len;i++){var str="";str='<li class="user_item"  data-id="'+res[i].id+'" data-name="'+res[i].name+'">                                <div class="name inline_block nowrap">'+res[i].name+'</div>                                <div class="user_mark inline_block nowrap">'+(res[i].account?res[i].account:"暂无部门")+"</div>                            </li>";html.push(str);$(".user_list").html(html.join(""))}}}function registerHideEmployeeList(){$("body").on("click",function(e){var targetId=e.target.id;if(targetId!="user"){if(!$(".set_box").is(":hidden")){$(".set_box").hide()}}})}